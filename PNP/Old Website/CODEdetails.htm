<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:st1="urn:schemas-microsoft-com:office:smarttags"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 10">
<meta name=Originator content="Microsoft Word 10">
<link rel=File-List href="CODEdetails_files/filelist.xml">
<title>CODE  ***********</title>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="State"/>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="place"/>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>giovankl</o:Author>
  <o:Template>Normal</o:Template>
  <o:LastAuthor>phyreskg</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>0</o:TotalTime>
  <o:Created>2007-07-11T16:19:00Z</o:Created>
  <o:LastSaved>2007-07-11T16:19:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>1086</o:Words>
  <o:Characters>6192</o:Characters>
  <o:Company>James Madison University</o:Company>
  <o:Lines>51</o:Lines>
  <o:Paragraphs>14</o:Paragraphs>
  <o:CharactersWithSpaces>7264</o:CharactersWithSpaces>
  <o:Version>10.6735</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:GrammarState>Clean</w:GrammarState>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if !mso]><object
 classid="clsid:38481807-CA0E-42D2-BF39-B33AF135CC4D" id=ieooui></object>
<style>
st1\:*{behavior:url(#ieooui) }
</style>
<![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:1447699666;
	mso-list-type:hybrid;
	mso-list-template-ids:1768060178 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l1
	{mso-list-id:1473018745;
	mso-list-type:hybrid;
	mso-list-template-ids:1042035374 67698703 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l1:level1
	{mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2050"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=EN-US style='tab-interval:.5in'>

<div class=Section1>

<p class=MsoNormal><span class=GramE>CODE<span style='mso-spacerun:yes'> 
</span>*</span>**********</p>

<p class=MsoNormal>The program QDCandTDC.cc is downloaded into the single board
computer. The sparsification is done in the prestart stage of the program </p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='margin-left:.5in'>Variables: thresh, opench1, opench2</p>

<p class=MsoNormal style='margin-left:.5in'>Keeps channel 0<span class=GramE>,1</span>
for the adc open</p>

<p class=MsoNormal style='margin-left:.5in'>Keeps all TDC channels open</p>

<p class=MsoNormal style='margin-left:.5in'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>Data is read from the TDC and the QDC</p>

<p class=MsoNormal><span style='mso-spacerun:yes'>   </span>The data from a
processed event in put in the multi event buffer MEB in the VME memory:</p>

<p class=MsoNormal><span style='mso-spacerun:yes'>      </span>MEB stores 32 <span
class=GramE>events<span style='mso-spacerun:yes'>  </span>one</span> event = 34
words 2 headers + 32 data words</p>

<p class=MsoNormal style='margin-left:1.0in'>(<span class=GramE>see</span>
below the event can be from 1 channel to 32 channels all gated or generated via
a common stop or common gate)</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>Program vme_analysis.cc reads the data from the banks and <span
class=GramE>build</span> histograms and stores them in a root file.<span
style='mso-spacerun:yes'>  </span>(<span class=GramE>see</span> below)</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>Buffers **************************************************</p>

<p class=MsoNormal>The buffer structure is described in convert.xls</p>

<p class=MsoNormal>There are two buffers DAQ=<span class=GramE>EVIO<span
style='mso-spacerun:yes'>  </span>&amp;</span><span style='mso-spacerun:yes'> 
</span>VME structure=MEB [Multiple Event<span style='mso-spacerun:yes'> 
</span>Buffer]</p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>The first buffer to
consider is <span class=GramE>th</span> the starage of the data in the VME
devices. The data are stored as events. One event is all the digitizartions for
single gate or stop. Each event is packed as (Header-Data-EOB). Several events
can be stored in an MEB buffer<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>     </span>VME data buffers
=<span class=GramE>=<span style='mso-spacerun:yes'>  </span>MEB</span> filled
with events<span style='mso-spacerun:yes'>  </span><span style='font-size:8.0pt'>(Header-Data-EOB)<o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>         </span>MEB BANK <span
class=GramE>=<span style='mso-spacerun:yes'>  </span>event</span> 1 Header 32
bit words with various bits encoded with info</p>

<p class=MsoNormal style='margin-left:1.0in'><span
style='mso-spacerun:yes'>           </span>DATA chan 1</p>

<p class=MsoNormal style='margin-left:1.0in'><span
style='mso-spacerun:yes'>           </span>DATA chan 2</p>

<p class=MsoNormal style='margin-left:1.0in'><span
style='mso-spacerun:yes'>     </span>EOBank word end of event 1</p>

<p class=MsoNormal style='margin-left:1.0in'><span style='mso-spacerun:yes'>   
</span>Same MEB BANK = event <span class=GramE>2<span
style='mso-spacerun:yes'>  </span>Header</span><span
style='mso-spacerun:yes'>    </span>repeat of above</p>

<p class=MsoNormal style='margin-left:1.0in'><span
style='mso-spacerun:yes'>          </span>DATA<span style='mso-spacerun:yes'>  
</span>channel 1</p>

<p class=MsoNormal style='margin-left:1.0in'><span
style='mso-spacerun:yes'>          </span>DATA<span style='mso-spacerun:yes'>  
</span>channel 2</p>

<p class=MsoNormal style='margin-left:1.0in'><span
style='mso-spacerun:yes'>         </span>EOBank word end of event 2</p>

<p class=MsoNormal style='margin-left:1.0in'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>EVIO <span class=GramE>Buffer<span
style='mso-spacerun:yes'>  </span>(</span>This is built inside the interrupt
routine and has buffers in buffers</p>

<p class=MsoNormal style='margin-left:1.0in'>LENGTH<span
style='mso-spacerun:yes'>   </span>Header top level evio A1</p>

<p class=MsoNormal style='margin-left:1.0in'>HEADER<span
style='mso-spacerun:yes'>   </span>Heaader top level A2</p>

<p class=MsoNormal style='margin-left:1.0in'>DATA<span
style='mso-spacerun:yes'>   </span>LENGTH 2<span style='mso-spacerun:yes'>  
</span>sub evio buffer 1 B1</p>

<p class=MsoNormal style='margin-left:1.0in'>DATA<span
style='mso-spacerun:yes'>    </span>HEADER2<span style='mso-spacerun:yes'>  
</span>sub buffer 1 B2</p>

<p class=MsoNormal style='margin-left:1.0in'>DATA<span
style='mso-spacerun:yes'>     </span>DATA<span style='mso-spacerun:yes'>      
</span>LENGTH-TDC<span style='mso-spacerun:yes'>   </span>TDC sub evio buffer
C1</p>

<p class=MsoNormal style='margin-left:1.0in'>DATA<span
style='mso-spacerun:yes'>     </span>DATA<span style='mso-spacerun:yes'>       
</span>HEADER-<span class=GramE>TDC<span style='mso-spacerun:yes'>  </span>c2</span></p>

<p class=MsoNormal style='margin-left:1.0in'><span style='mso-tab-count:3'>                                    </span>TDC
ddata == tdcevent1</p>

<p class=MsoNormal style='margin-left:1.0in'><span
style='mso-spacerun:yes'>                                          </span>:</p>

<p class=MsoNormal style='margin-left:1.0in'>DATA<span
style='mso-spacerun:yes'>     </span>DATA<span style='mso-spacerun:yes'>      
</span>LENGTH-TDC<span style='mso-spacerun:yes'>   </span>TDC sub evio buffer
D1</p>

<p class=MsoNormal style='margin-left:1.0in'>DATA<span
style='mso-spacerun:yes'>     </span>DATA<span style='mso-spacerun:yes'>       
</span>HEADER-<span class=GramE>TDC<span style='mso-spacerun:yes'>  </span>c2</span></p>

<p class=MsoNormal style='margin-left:1.0in'><span style='mso-tab-count:3'>                                    </span>TDCdata==
tdcevent2</p>

<p class=MsoNormal style='margin-left:1.0in'><span
style='mso-spacerun:yes'>                            </span><span
style='mso-spacerun:yes'>              </span>:</p>

<p class=MsoNormal style='margin-left:1.0in'>DATA<span style='mso-tab-count:
1'>  </span><span style='mso-spacerun:yes'>    </span>DATA<span
style='mso-spacerun:yes'>       </span>LENGTH-<span class=GramE>ADC<span
style='mso-spacerun:yes'>  </span>ADC</span> suv evio buffer E1</p>

<p class=MsoNormal style='margin-left:1.0in'>DATA<span
style='mso-spacerun:yes'>    </span>DATA<span style='mso-spacerun:yes'>       
</span>HEADER –ADCD2</p>

<p class=MsoNormal style='margin-left:1.0in'><span
style='mso-spacerun:yes'>                                   </span>ADC DATA ==<span
class=GramE>adc</span> event 1 (max=34)</p>

<p class=MsoNormal style='margin-left:1.0in'><span
style='mso-spacerun:yes'>                                          </span>:</p>

<p class=MsoNormal style='margin-left:1.0in'>DATA<span style='mso-tab-count:
1'>  </span><span style='mso-spacerun:yes'>    </span>DATA<span
style='mso-spacerun:yes'>       </span>LENGTH-<span class=GramE>ADC<span
style='mso-spacerun:yes'>  </span>ADC</span> suv evio buffer F1</p>

<p class=MsoNormal style='margin-left:1.0in'>DATA<span
style='mso-spacerun:yes'>    </span>DATA<span style='mso-spacerun:yes'>       
</span>HEADER –ADCD2</p>

<p class=MsoNormal style='margin-left:1.0in'><span
style='mso-spacerun:yes'>                                   </span>ACD <span
class=GramE>DATA<span style='mso-spacerun:yes'>  </span>=</span>= adc event 2
(min=3)</p>

<p class=MsoNormal style='margin-left:1.0in'><span
style='mso-spacerun:yes'>                                          </span>:</p>

<p class=MsoNormal>A1</p>

<p class=MsoNormal>A2</p>

<p class=MsoNormal style='margin-left:.5in'>B1</p>

<p class=MsoNormal style='margin-left:.5in'>B2</p>

<p class=MsoNormal style='margin-left:.5in'><span style='mso-tab-count:1'>            </span>C1
</p>

<p class=MsoNormal style='margin-left:1.0in'>C2</p>

<p class=MsoNormal style='margin-left:1.0in'>C3<span
style='mso-spacerun:yes'>     </span>VME HDR banks of ADC data </p>

<p class=MsoNormal style='margin-left:1.0in'>C4<span
style='mso-spacerun:yes'>    </span><a name="OLE_LINK1"><span
style='mso-spacerun:yes'> </span>VME data<span style='mso-spacerun:yes'>  
</span></a>(see convert.xls but now there is a VME buffer)</p>

<div style='border:none;border-bottom:solid windowtext 1.0pt;mso-border-bottom-alt:
solid windowtext .75pt;padding:0in 0in 1.0pt 0in;margin-left:1.0in;margin-right:
0in'>

<p class=MsoNormal style='border:none;mso-border-bottom-alt:solid windowtext .75pt;
padding:0in;mso-padding-alt:0in 0in 1.0pt 0in'>C5<span
style='mso-spacerun:yes'>      </span>VME data<span style='mso-spacerun:yes'>  
</span>bit packed with channel info</p>

<p class=MsoNormal style='border:none;mso-border-bottom-alt:solid windowtext .75pt;
padding:0in;mso-padding-alt:0in 0in 1.0pt 0in'>C6<span
style='mso-spacerun:yes'>    </span><span style='mso-tab-count:1'>   </span>EO
event<span style='mso-spacerun:yes'>      </span></p>

</div>

<p class=MsoNormal style='margin-left:.5in'><span style='mso-tab-count:1'>            </span>D1
</p>

<p class=MsoNormal style='margin-left:1.0in'>D2</p>

<p class=MsoNormal style='margin-left:1.0in'>D3<span
style='mso-spacerun:yes'>     </span>VME HDR banks of ADC data </p>

<p class=MsoNormal style='margin-left:1.0in'>D4<span
style='mso-spacerun:yes'>     </span>VME data<span style='mso-spacerun:yes'>  
</span>(see convert.xls but now there is a VME buffer)</p>

<div style='border:none;border-bottom:solid windowtext 1.0pt;mso-border-bottom-alt:
solid windowtext .75pt;padding:0in 0in 1.0pt 0in;margin-left:1.0in;margin-right:
0in'>

<p class=MsoNormal style='border:none;mso-border-bottom-alt:solid windowtext .75pt;
padding:0in;mso-padding-alt:0in 0in 1.0pt 0in'>D5<span
style='mso-spacerun:yes'>      </span>VME data<span style='mso-spacerun:yes'>  
</span>bit packed with channel info<span style='mso-spacerun:yes'>      </span></p>

<p class=MsoNormal style='border:none;mso-border-bottom-alt:solid windowtext .75pt;
padding:0in;mso-padding-alt:0in 0in 1.0pt 0in'>D6 <span style='mso-tab-count:
1'>      </span>END OF event last event in VME MEB (multiple event <span
class=GramE>buffer</span></p>

</div>

<p class=MsoNormal style='margin-left:1.0in'>E1 </p>

<p class=MsoNormal style='margin-left:1.0in'>E2</p>

<p class=MsoNormal style='margin-left:1.0in'>E3 VME banks of TDC data</p>

<p class=MsoNormal style='margin-left:1.0in'>E4</p>

<div style='border:none;border-bottom:solid windowtext 1.0pt;mso-border-bottom-alt:
solid windowtext .75pt;padding:0in 0in 1.0pt 0in;margin-left:1.0in;margin-right:
0in'>

<p class=MsoNormal style='border:none;mso-border-bottom-alt:solid windowtext .75pt;
padding:0in;mso-padding-alt:0in 0in 1.0pt 0in'>E5<span
style='mso-spacerun:yes'>  </span></p>

<p class=MsoNormal style='border:none;mso-border-bottom-alt:solid windowtext .75pt;
padding:0in;mso-padding-alt:0in 0in 1.0pt 0in'>E6 <span style='mso-tab-count:
1'>       </span>END OF event </p>

</div>

<p class=MsoNormal style='margin-left:1.0in'>F1 </p>

<p class=MsoNormal style='margin-left:1.0in'>F2</p>

<p class=MsoNormal style='margin-left:1.0in'>F3</p>

<div style='border:none;border-bottom:solid windowtext 1.0pt;mso-border-bottom-alt:
solid windowtext .75pt;padding:0in 0in 1.0pt 0in;margin-left:1.0in;margin-right:
0in'>

<p class=MsoNormal style='border:none;mso-border-bottom-alt:solid windowtext .75pt;
padding:0in;mso-padding-alt:0in 0in 1.0pt 0in'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='border:none;mso-border-bottom-alt:solid windowtext .75pt;
padding:0in;mso-padding-alt:0in 0in 1.0pt 0in'>END OF ALL A<span class=GramE>,B,F</span><span
style='mso-spacerun:yes'>   </span>end of last event in MEB TDC buffer</p>

</div>

<p class=MsoNormal style='margin-left:1.0in'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='margin-left:1.0in'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>**&amp;******************************************</p>

<p class=MsoNormal style='margin-left:1.0in'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='margin-left:1.0in'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>Buffers are built passed to the event builder and written to
a file. The vme_analysis code reads the EVIO buffers and extracts the TDC and
ADC banks.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<ol style='margin-top:0in' start=1 type=1>
 <li class=MsoNormal style='mso-list:l1 level1 lfo1;tab-stops:list .5in'>Get an
     evio event buffer (consiss of all the data written during one execution of
     the interrupt routine. The polling causes the routine to get data. The
     routine reads the two VME modules and packages the data into one evio
     buffer with several subbuffers as shown above.</li>
 <li class=MsoNormal style='mso-list:l1 level1 lfo1;tab-stops:list .5in'>Get
     the first sub buffer in the evio event buffer. The structure shown above
     has this sub buffer divided into a TDC and QDC subbuffer (There may be no
     data from either source and therefore perhaps only a QDC buffer or only a
     TDC buffer.)</li>
 <li class=MsoNormal style='mso-list:l1 level1 lfo1;tab-stops:list .5in'>Process
     each QDC/TDC buffer by looking at the tag word as an ID.</li>
 <li class=MsoNormal style='mso-list:l1 level1 lfo1;tab-stops:list .5in'>The
     QDC and TDC buffers are filled from the VME buffers. The VME buffers hold
     events (HDR<span class=GramE>:data:EOB</span> | HDR:data:EOB |
     HDR:data:EOB<span style='mso-spacerun:yes'>   </span>32 such events). Note
     that each event from an MEB is packed first into and evio buffer.</li>
</ol>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>Examine the tmp.log from run 17</p>

<p class=MsoNormal><span class=GramE>get</span> next evio buffer 1 ******</p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE>TDCev<span
style='mso-spacerun:yes'>  </span>1</span>:<span style='mso-spacerun:yes'> 
</span>len 4<span style='mso-spacerun:yes'>  </span>tag 3=TDC<span
style='mso-spacerun:yes'>  </span>data=1105<span style='mso-spacerun:yes'> 
</span>chan=7 valid=1<span style='mso-spacerun:yes'>  </span>ovfl=0 underfl=0<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE>TDCev<span
style='mso-spacerun:yes'>  </span>2</span>:<span style='mso-spacerun:yes'> 
</span>len 4<span style='mso-spacerun:yes'>                              
</span>1102</p>

<p class=MsoNormal style='margin-left:1.5in'>Cycle through all the VME TDC
buffers (HDR<span class=GramE>:data:EOB</span>)</p>

<p class=MsoNormal style='margin-left:1.5in'>This run has one TDC value per VME
event and the buffer is full so there are 32 TDC events at this interrupt<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>TDCev 32</p>

<p class=MsoNormal style='margin-left:.5in'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='margin-left:.5in'>QDCev 33: len 4 tag= 4QDC data=1574
H/L=0=<span class=GramE>LO<span style='mso-spacerun:yes'>  </span>chan</span>=0
ovf=0 valid=0<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>QDCev 34: len 4 tag= 4QDC data=1575
H/L=0=<span class=GramE>LO<span style='mso-spacerun:yes'>  </span>chan</span>=0
ovf=0 valid=0</p>

<p class=MsoNormal style='margin-left:1.5in'>There is one <span class=GramE>adc</span>
value in the event it is channel 0 LO. It then finds a full buffer or 32
events.<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.25in'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='margin-left:.5in'>QDCev 64: len 4 tag= 4QDC data=157x
H/L=0=<span class=GramE>LO<span style='mso-spacerun:yes'>  </span>chan</span>=0
ovf=0 valid=0</p>

<p class=MsoNormal><span class=GramE>get</span> next evio buffer 2 ******</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>---- <span class=GramE>examine</span> run 16 -----------</p>

<p class=MsoNormal><span class=GramE>get</span> next evio buffer 1 ******</p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE>TDCev<span
style='mso-spacerun:yes'>  </span>1</span>:<span style='mso-spacerun:yes'> 
</span>len 4<span style='mso-spacerun:yes'>  </span>tag 3=TDC<span
style='mso-spacerun:yes'>  </span>data=1105<span style='mso-spacerun:yes'> 
</span>chan=7 valid=1<span style='mso-spacerun:yes'>  </span>ovfl=0 underfl=0<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE>TDCev<span
style='mso-spacerun:yes'>  </span>2</span>:<span style='mso-spacerun:yes'> 
</span>len 4<span style='mso-spacerun:yes'>                          </span><span
style='mso-spacerun:yes'>     </span>1102</p>

<p class=MsoNormal style='margin-left:1.5in'>Cycle through all the VME TDC
buffers (HDR<span class=GramE>:data:EOB</span>)</p>

<p class=MsoNormal style='margin-left:1.5in'>This run has one TDC value per VME
event and the buffer is full so there are 32 TDC events at this interrupt each
one is in a separate evio buffer<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>TDCev 32</p>

<p class=MsoNormal style='margin-left:.5in'>QDCev 33:<span
style='mso-spacerun:yes'>  </span>len <span class=GramE>34<span
style='mso-spacerun:yes'>  </span>tag</span> 4 <span
style='mso-spacerun:yes'> </span>(one event in an evio buffer)</p>

<p class=MsoNormal style='margin-left:1.0in'>&lt;qdcbuffer<span
style='mso-spacerun:yes'>   </span>data=85 <span class=GramE>H[</span>1]orL[0]=0<span
style='mso-spacerun:yes'>  </span>chan=0 ovf=0 valid=0 /&gt;</p>

<p class=MsoNormal style='margin-left:1.0in'><span
style='mso-spacerun:yes'> </span>&lt;qdcbuffer data=77 <span class=GramE>H[</span>1]orL[0]=0<span
style='mso-spacerun:yes'>  </span>chan=8 ovf=0 valid=0 /&gt;</p>

<p class=MsoNormal style='margin-left:1.0in'><span
style='mso-spacerun:yes'> </span>&lt;qdcbuffer data=607 <span class=GramE>H[</span>1]orL[0]=1<span
style='mso-spacerun:yes'>  </span>chan=0 ovf=0 valid=0 /&gt;</p>

<p class=MsoNormal style='margin-left:1.0in'><span style='mso-spacerun:yes'> 
</span>&lt;<span class=GramE>qdcbuffer<span style='mso-spacerun:yes'> 
</span>data</span>=640 H[1]orL[0]=1<span style='mso-spacerun:yes'> 
</span>chan=8 ovf=0 valid=0 /&gt;</p>

<p class=MsoNormal style='margin-left:1.0in'><span style='mso-spacerun:yes'> 
</span>&lt;qdcbufferdata=49 <span class=GramE>H[</span>1]orL[0]=0<span
style='mso-spacerun:yes'>  </span>chan=9 ovf=0 valid=0 /&gt;</p>

<p class=MsoNormal><span
style='mso-spacerun:yes'>                                                        
</span>:</p>

<p class=MsoNormal style='margin-left:1.0in'>&lt;qdcbuffer<span
style='mso-spacerun:yes'>   </span>data=659 <span class=GramE>H[</span>1]orL[0]=1<span
style='mso-spacerun:yes'>  </span>chan=15 ovf=0 valid=0 /&gt;</p>

<p class=MsoNormal style='margin-left:1.0in'>This is one VME event from the QDC
with all channels present. There are 16 inputs and each einput is digitized on
a high and low scale fiving 32 pieces of data. All of the data is pedesatals<o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'>QDCev 34:<span
style='mso-spacerun:yes'>  </span>len <span class=GramE>34<span
style='mso-spacerun:yes'>  </span>tag</span> 4</p>

<p class=MsoNormal style='margin-left:1.0in'>Same as above all qdc channels in
the event buffer</p>

<p class=MsoNormal style='margin-left:1.0in'><span
style='mso-spacerun:yes'> </span></p>

<p class=MsoNormal style='margin-left:.5in'>QDCev 64:<span
style='mso-spacerun:yes'>  </span>len <span class=GramE>34<span
style='mso-spacerun:yes'>  </span>tag</span> 4</p>

<p class=MsoNormal style='margin-left:1.0in'>Same as above all qdc channels in
the event buffer</p>

<p class=MsoNormal><span class=GramE>get</span> next evio buffer 2 ******</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>____________**___________________________</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>So it seems that </p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='mso-list:l0 level1 lfo2;tab-stops:list .5in'>the
     processing in the SBC</li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo2;tab-stops:list .5in'>buffer
     construction</li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo2;tab-stops:list .5in'>message
     passing</li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo2;tab-stops:list .5in'>file
     writing of the event builder</li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo2;tab-stops:list .5in'>data
     processing of the analysis code all work</li>
</ul>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><span class=GramE>examine</span> the data from cal8000.dat
series and I find that chan 3 qdc channel 1 Lo </p>

<p class=MsoNormal><span class=GramE>is</span> sometimes missing from the data
stream.</p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE>ch=</span>0 h=0
==1, <span style='mso-spacerun:yes'> </span>histogram L is the QDC with lower
gain</p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE>ch=</span>0 h=1
==2,<span style='mso-spacerun:yes'>  </span>histogram H is the QDC with higher
gain</p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE>ch=</span>1 h=0
==3, </p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE>ch=</span>1 h=1
==4</p>

<p class=MsoNormal>The most recent data that was recorded with all signals
checked ect had channel 2<span class=GramE>,4</span> sometimes missing. These
would have been expected overflow events. So if the data overflows it doesn’t
seem to be passed.<span style='mso-spacerun:yes'>  </span>There are a number of
settings that could be checked but the details are not important enough at this
point there are conditions when the raw data from the QDC will not have all
channels present.</p>

<p class=MsoNormal style='margin-left:.5in'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>eviobuf2=1, evio4=28, event size=32 for event=28</p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE>data=</span>1566,
udflow=0, valid=0, chan=1</p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE>data=</span>4061,
udflow=0, valid=0, chan=2</p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE>data=</span>26,
udflow=0, valid=0, chan=3</p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE>data=</span>146,
udflow=0, valid=0, chan=4</p>

<p class=MsoNormal><span class=GramE>finished</span> <st1:State><st1:place>ind</st1:place></st1:State>=
1008 ,</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><span class=GramE>analyze</span> the event 29 lenght=34, <st1:State><st1:place>ind</st1:place></st1:State>=
1008,</p>

<p class=MsoNormal>eviobuf2=1, evio4=29, event size=31 for event=29</p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE>data=</span>40,
udflow=0, valid=0, chan=1</p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE>data=</span>243,
udflow=0, valid=0, chan=2<span style='mso-spacerun:yes'>           
</span>************** 3 missing ???</p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE>data=</span>4051,
udflow=0, valid=0, chan=4</p>

<p class=MsoNormal><span class=GramE>finished</span> <st1:State><st1:place>ind</st1:place></st1:State>=
1043 ,</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

</div>

</body>

</html>
